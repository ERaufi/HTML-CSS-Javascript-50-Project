<!DOCTYPE html>
<html>
  <head>
    <title>Tic Tac Toe</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        text-align: center;
        background-color: #2c3e50;
      }
      h1 {
        margin-top: 40px;
        color: #fff;
      }
      .board {
        margin-top: 40px;
        display: inline-block;
        border-spacing: 5px;
        perspective: 1000px;
      }
      .board td {
        width: 150px;
        height: 150px;
        border: 1px solid #ccc;
        text-align: center;
        font-size: 60px;
        cursor: pointer;
        transition: transform 0.3s;
        transform-style: preserve-3d;
        position: relative;
      }
      .board td:hover {
        background-color: #f4f4f4;
      }
      .board td.X::before,
      .board td.O::before {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 80px;
        color: #fff;
        opacity: 0;
        transition: opacity 0.3s;
      }
      .board td.X::before {
        content: "X";
      }
      .board td.O::before {
        content: "O";
      }
      .message {
        margin-top: 20px;
        font-size: 24px;
        color: #fff;
      }
      .reset-button {
        margin-top: 20px;
        padding: 10px 20px;
        font-size: 18px;
        background-color: #fff;
        color: #333;
        border: none;
        cursor: pointer;
        display: none;
      }
    </style>
  </head>
  <body>
    <h1>Tic Tac Toe</h1>

    <table class="board">
      <tr>
        <td onclick="makeMove(0, 0)"></td>
        <td onclick="makeMove(0, 1)"></td>
        <td onclick="makeMove(0, 2)"></td>
      </tr>
      <tr>
        <td onclick="makeMove(1, 0)"></td>
        <td onclick="makeMove(1, 1)"></td>
        <td onclick="makeMove(1, 2)"></td>
      </tr>
      <tr>
        <td onclick="makeMove(2, 0)"></td>
        <td onclick="makeMove(2, 1)"></td>
        <td onclick="makeMove(2, 2)"></td>
      </tr>
    </table>

    <div class="message" id="message"></div>

    <button class="reset-button" onclick="resetGame()">Reset</button>

    <script>
      let board = [
        ["", "", ""],
        ["", "", ""],
        ["", "", ""],
      ];
      let currentPlayer = "X";
      let gameOver = false;
      let moves = 0;

      function makeMove(row, col) {
        if (board[row][col] === "" && !gameOver) {
          board[row][col] = currentPlayer;
          document.getElementById("message").textContent = "";

          const cell = document.getElementsByTagName("td")[row * 3 + col];
          cell.classList.add(currentPlayer);
          cell.style.transform = "rotateY(180deg)";
          cell.textContent = currentPlayer;

          setTimeout(() => {
            cell.style.transform = "rotateY(0deg)";
            cell.children[0].style.opacity = 1;
          }, 300);

          checkWin();
          switchPlayer();
          moves++;
          checkDraw();

          if (!gameOver && currentPlayer === "O") {
            computerMove();
          }
        }
      }

      function checkWin() {
        const winningConditions = [
          [
            [0, 0],
            [0, 1],
            [0, 2],
          ],
          [
            [1, 0],
            [1, 1],
            [1, 2],
          ],
          [
            [2, 0],
            [2, 1],
            [2, 2],
          ],
          [
            [0, 0],
            [1, 0],
            [2, 0],
          ],
          [
            [0, 1],
            [1, 1],
            [2, 1],
          ],
          [
            [0, 2],
            [1, 2],
            [2, 2],
          ],
          [
            [0, 0],
            [1, 1],
            [2, 2],
          ],
          [
            [0, 2],
            [1, 1],
            [2, 0],
          ],
        ];

        for (let i = 0; i < winningConditions.length; i++) {
          const [[a, b], [c, d], [e, f]] = winningConditions[i];
          if (
            board[a][b] !== "" &&
            board[a][b] === board[c][d] &&
            board[a][b] === board[e][f]
          ) {
            document.getElementById(
              "message"
            ).textContent = `Player ${board[a][b]} wins!`;
            gameOver = true;
            showResetButton();
            break;
          }
        }
      }

      function switchPlayer() {
        currentPlayer = currentPlayer === "X" ? "O" : "X";
      }

      function checkDraw() {
        if (moves === 9 && !gameOver) {
          document.getElementById("message").textContent = "It's a draw!";
          gameOver = true;
          showResetButton();
        }
      }

      function computerMove() {
        const emptyCells = [];
        for (let i = 0; i < 3; i++) {
          for (let j = 0; j < 3; j++) {
            if (board[i][j] === "") {
              emptyCells.push([i, j]);
            }
          }
        }

        const randomIndex = Math.floor(Math.random() * emptyCells.length);
        const [row, col] = emptyCells[randomIndex];

        setTimeout(() => {
          makeMove(row, col);
        }, 1000);
      }

      function resetGame() {
        board = [
          ["", "", ""],
          ["", "", ""],
          ["", "", ""],
        ];
        currentPlayer = "X";
        gameOver = false;
        moves = 0;
        document.getElementById("message").textContent = "";
        document.querySelectorAll(".board td").forEach((cell) => {
          cell.textContent = "";
          cell.classList.remove("X", "O");
        });
        hideResetButton();
      }

      function showResetButton() {
        const resetButton = document.querySelector(".reset-button");
        resetButton.style.display = "inline-block";
      }

      function hideResetButton() {
        const resetButton = document.querySelector(".reset-button");
        resetButton.style.display = "none";
      }
    </script>
  </body>
</html>
